(this["webpackJsonplightning-no-1"]=this["webpackJsonplightning-no-1"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(7),o=n.n(a),r=n(40),c=n.n(r),s=n(15),i=n(70),u=n(11),d=n(13),l=n(8);function p(e,t){switch(t.type){case"UPDATE_AUDIO_STATE":return Object(l.a)(Object(l.a)({},e),{},{audioIsPlaying:t.payload});case"UPDATE_CURRENT_NOTE":return Object(l.a)(Object(l.a)({},e),{},{currentNote:t.payload});case"RESET_NOTES":return Object(l.a)(Object(l.a)({},e),{},{notes:[]});case"UPDATE_NOTES":return Object(l.a)(Object(l.a)({},e),{},{notes:[].concat(Object(d.a)(e.notes),[t.payload])});case"UPDATE_CAN_SET_CAMERA_POS":return Object(l.a)(Object(l.a)({},e),{},{canSetCameraPos:!1});case"UPDATE_CAMERA_ZPOS":var n=t.payload.currentCue,a=e.cameraZPos;return n>14?n%14===1&&n>28&&n<84?Object(l.a)(Object(l.a)({},e),{},{canSetCameraPos:!0,cameraZPos:(o=-325,r=-225,Math.floor(Math.random()*(r-o+1)+o))}):Object(l.a)(Object(l.a)({},e),{},{canSetCameraPos:!1}):(n&&(a+=60),Object(l.a)(Object(l.a)({},e),{},{canSetCameraPos:!0,cameraZPos:a}));case"UPDATE_CAMERA_ROTATE_SPEED":return Object(l.a)(Object(l.a)({},e),{},{cameraRotateSpeed:-1*e.cameraRotateSpeed});default:throw new Error("Action type does not exist!")}var o,r}var m=n(9),j={coloursOptions:["maroon","red","purple","green","yellow","blue","pink","aqua","teal","lime"],audioIsPlaying:!1,notes:[],currentNote:0,canSetCameraPos:!0,cameraZPos:-1050,cameraRotateSpeed:-2},g=Object(a.createContext)(j),b=function(e){var t=e.children,n=Object(a.useReducer)(p,j),o=Object(u.a)(n,2),r=o[0],c=o[1];return Object(m.jsx)(g.Provider,{value:{coloursOptions:r.coloursOptions,audioIsPlaying:r.audioIsPlaying,updateIsAudioPlaying:function(e){c({type:"UPDATE_AUDIO_STATE",payload:e})},notes:r.notes,updateNotes:function(e){c({type:"UPDATE_NOTES",payload:e})},resetNotes:function(){c({type:"RESET_NOTES"})},currentNote:r.currentNote,updateCurrentNote:function(e){c({type:"UPDATE_CURRENT_NOTE",payload:e})},canSetCameraPos:r.canSetCameraPos,updateCanSetCameraPos:function(){c({type:"UPDATE_CAN_SET_CAMERA_POS"})},cameraZPos:r.cameraZPos,updateCameraZPos:function(e){c({type:"UPDATE_CAMERA_ZPOS",payload:e})},cameraRotateSpeed:r.cameraRotateSpeed,updateCameraRotateSpeed:function(){c({type:"UPDATE_CAMERA_ROTATE_SPEED"})}},children:t})},O=n(41);function f(e){var t=e.canSetCameraPos,n=e.updateCanSetCameraPos,o=e.cameraZPos,r=e.cameraRotateSpeed,c=Object(s.d)(),i=c.camera,u=c.gl.domElement,d=Object(a.useRef)();return Object(s.c)((function(){t&&(i.position.set(0,0,o),n()),d.current.autoRotate=!0,d.current.autoRotateSpeed=r,d.current.update()})),Object(m.jsx)("orbitControls",{ref:d,args:[i,u],enableZoom:!0})}Object(s.b)({OrbitControls:O.a});var h=n(4),C=n(47),P=n(44),E=n(45);function y(e){var t=e.outlines,n=Object(s.d)(),o=n.gl,r=n.scene,c=n.size,i=n.camera,u=Object(a.useRef)(),d=Object(a.useMemo)((function(){return new h.Vector2(window.innerWidth,window.innerHeight)}),[c]);return Object(a.useEffect)((function(){u.current.setSize(window.innerWidth,window.innerHeight)}),[c]),Object(s.c)((function(){u.current.render()}),1),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("effectComposer",{ref:u,args:[o],children:[Object(m.jsx)("renderPass",{attachArray:"passes",args:[r,i]}),t.map((function(e,t){return Object(m.jsx)("outlinePass",{attachArray:"passes",args:[d,r,i],visibleEdgeColor:e.glow,selectedObjects:[e],edgeStrength:2.5,edgeThickness:2.8,edgeGlow:2.7,hiddenEdgeColor:0},t)}))]})})}Object(s.b)({EffectComposer:C.a,RenderPass:E.a,OutlinePass:P.a});var v=n(48);function S(e){var t=e.pos,n=e.colour,o=e.addToObjectsArray,r=Object(a.useContext)(g).coloursOptions,c=Object(a.useRef)(),i=new v.a;return Object(s.c)((function(e){var t=e.clock.getElapsedTime();c.current.geometry.update(t)})),Object(a.useEffect)((function(){c.current.glow=r[Math.floor(Math.random()*r.length)],o(c.current)}),[o]),Object(m.jsx)("mesh",{ref:c,geometry:i,position:t,children:Object(m.jsx)("meshBasicMaterial",{color:n,attach:"material",transparent:!0,roughness:.1,metalness:.1})})}function w(){var e=Object(a.useContext)(g),t=e.notes,n=e.currentNote,o=e.canSetCameraPos,r=e.updateCanSetCameraPos,c=e.cameraZPos,u=e.cameraRotateSpeed,d=(n.currentCue,[]),l=function(e){d.push(e)};return Object(m.jsx)(s.a,{children:Object(m.jsxs)(a.Suspense,{fallback:"loading...",children:[Object(m.jsx)("ambientLight",{intensity:.5}),Object(m.jsx)("spotLight",{position:[10,10,10],angle:.15,penumbra:1}),Object(m.jsx)("pointLight",{position:[-10,-10,-10]}),Object(m.jsx)(i.a,{radius:75,saturation:50,fade:!0}),Object(m.jsx)(m.Fragment,{children:t.map((function(e,t){return Object(m.jsx)(S,{pos:[e.xPos,e.yPos,e.zPos],colour:e.colour,addToObjectsArray:l},t)}))}),Object(m.jsx)(y,{outlines:d}),Object(m.jsx)(f,{canSetCameraPos:o,updateCanSetCameraPos:r,cameraZPos:c,cameraRotateSpeed:u})]})})}var x=n(33);window.p5=x;n(57);var A=n(46);function T(){return Object(m.jsxs)("svg",{id:"play-icon",className:"play-icon",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(m.jsx)("path",{className:"play-icon__play",d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),Object(m.jsx)("path",{className:"play-icon__pause",xmlns:"http://www.w3.org/2000/svg",d:"M9 16h2V8H9Zm4 0h2V8h-2Zm-1 6q-2.075 0-3.9-.788-1.825-.787-3.175-2.137-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175 1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138 1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175-1.35 1.35-3.175 2.137Q14.075 22 12 22Zm0-2q3.35 0 5.675-2.325Q20 15.35 20 12q0-3.35-2.325-5.675Q15.35 4 12 4 8.65 4 6.325 6.325 4 8.65 4 12q0 3.35 2.325 5.675Q8.65 20 12 20Zm0-8Z"})]})}var _=n.p+"static/media/lightning-no-1.fb3e5d26.ogg",R=n.p+"static/media/lightning-no-1.1611ab50.mid",N=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useContext)(g),o=n.coloursOptions,r=n.updateNotes,c=n.resetNotes,s=n.updateCurrentNote,i=n.updateCameraZPos,u=n.updateCameraRotateSpeed,d=function(e){e.canvas=null,e.canvasWidth=window.innerWidth,e.canvasHeight=window.innerHeight,e.audioLoaded=!1,e.player=null,e.PPQ=15360,e.loadMidi=function(){A.Midi.fromUrl(R).then((function(t){var n=t.tracks[8].notes;e.scheduleCueSet(n,"executeCueSet1"),e.audioLoaded=!0,document.getElementById("loader").classList.add("loading--complete"),document.getElementById("play-icon").classList.remove("fade-out")}))},e.preload=function(){e.song=e.loadSound(_,e.loadMidi),e.song.onended(e.logCredits)},e.scheduleCueSet=function(t,n){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1,r=1,c=0;c<t.length;c++){var s=t[c],i=s.ticks,u=s.time;(i!==o||a)&&(s.currentCue=r,e.song.addCue(u,e[n],s),o=i,r++)}},e.setup=function(){e.canvas=e.createCanvas(e.canvasWidth,e.canvasHeight),e.noLoop()},e.draw=function(){e.audioLoaded&&e.song.isPlaying()},e.gridVersion=1,e.executeCueSet1=function(t){var n=t.currentCue,a=t.ticks,d=o,l=d[Math.floor(Math.random()*d.length)],p=n>15?150:n;if(s(t),i(t),(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&n%2===0&&n<84||n%14<6&&n<84&&n%2===0||[6,10,1].includes(n%14))&&c(),(n%14===1||a%61440===0)&&n>14){var m=document.documentElement,j=[1,2,3,4,5];j.splice(e.gridVersion-1,1),e.gridVersion=e.random(j),m.style.setProperty("--canvas-bg","var(--bg-gradient-"+e.gridVersion+")")}n%14===1&&n>15&&u(),r({colour:l,xPos:e.random(-p,p),yPos:e.random(-p/2-50,p/2-50),zPos:e.random(-50,p)})},e.mousePressed=function(){},e.creditsLogged=!1,e.logCredits=function(){!e.creditsLogged&&parseInt(e.song.currentTime())>=parseInt(e.song.buffer.duration)&&(e.creditsLogged=!0,console.log("Music By: http://labcat.nz/","\n","Animation By: https://github.com/LABCAT/"),e.song.stop())},e.reset=function(){},e.updateCanvasDimensions=function(){e.canvasWidth=window.innerWidth,e.canvasHeight=window.innerHeight,e.canvas=e.resizeCanvas(e.canvasWidth,e.canvasHeight)},window.attachEvent?window.attachEvent("onresize",(function(){e.updateCanvasDimensions()})):window.addEventListener&&window.addEventListener("resize",(function(){e.updateCanvasDimensions()}),!0)};return Object(a.useEffect)((function(){e.current=new x(d,t.current)}),[]),Object(m.jsx)("div",{ref:t,children:Object(m.jsx)("button",{onClick:function(){console.log(e.current),e.current&&e.current.audioLoaded&&(e.current.song.isPlaying()?(e.current.song.pause(),document.getElementById("play-icon").classList.remove("play-icon--playing")):(parseInt(e.current.song.currentTime())>=parseInt(e.current.song.buffer.duration)&&e.current.reset(),document.getElementById("play-icon").classList.add("play-icon--playing"),e.current.canvas.addClass("fade-in"),e.current.song.play()))},id:"play-button",children:Object(m.jsx)(T,{})})})};function M(){return Object(m.jsxs)(b,{children:[Object(m.jsx)(w,{}),Object(m.jsx)(N,{})]})}n(67);c.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.891874ff.chunk.js.map