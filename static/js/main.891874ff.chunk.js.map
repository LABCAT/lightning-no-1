{"version":3,"sources":["js/context/Reducer.js","js/context/Context.js","js/components/CameraControls.js","js/components/Effects.js","js/components/String.js","js/Scene.js","js/helpers/Globals.js","js/functions/PlayIcon.js","audio/lightning-no-1.ogg","audio/lightning-no-1.mid","js/Audio.js","js/App.js","index.js"],"names":["Reducer","state","action","type","audioIsPlaying","payload","currentNote","notes","canSetCameraPos","currentCue","zPos","cameraZPos","min","max","Math","floor","random","cameraRotateSpeed","Error","initialState","coloursOptions","Context","createContext","GlobalContextProvider","children","useReducer","dispatch","Provider","value","updateIsAudioPlaying","playing","updateNotes","newNote","resetNotes","updateCurrentNote","updateCanSetCameraPos","updateCameraZPos","newCue","updateCameraRotateSpeed","CameraControls","props","useThree","camera","domElement","gl","controls","useRef","useFrame","position","set","current","autoRotate","autoRotateSpeed","update","ref","args","enableZoom","extend","OrbitControls","Effects","outlines","scene","size","composer","aspect","useMemo","Vector2","window","innerWidth","innerHeight","useEffect","setSize","render","attachArray","map","outline","index","visibleEdgeColor","glow","selectedObjects","edgeStrength","edgeThickness","edgeGlow","hiddenEdgeColor","EffectComposer","RenderPass","OutlinePass","String","pos","colour","addToObjectsArray","useContext","mesh","lightning","LightningStrike","time","clock","getElapsedTime","geometry","length","color","attach","transparent","roughness","metalness","Scene","objectsArray","string","push","fallback","intensity","angle","penumbra","Stars","radius","saturation","fade","note","xPos","yPos","p5","PlayIcon","id","className","xmlns","height","viewBox","width","d","Audio","animation","sketchRef","Sketch","p","canvas","canvasWidth","canvasHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","noteSet1","tracks","scheduleCueSet","document","getElementById","classList","add","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","lastTicks","i","ticks","addCue","setup","createCanvas","noLoop","draw","isPlaying","gridVersion","executeCueSet1","colours","dist","navigator","userAgent","toLowerCase","indexOf","includes","root","documentElement","gridOptions","splice","style","setProperty","mousePressed","creditsLogged","parseInt","currentTime","buffer","duration","console","log","stop","reset","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","onClick","pause","addClass","play","App","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.891874ff.chunk.js","sourcesContent":["function randomIntFromInterval(min, max) { // min and max included \n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport default function Reducer(state, action) {\n    switch (action.type) {\n        case \"UPDATE_AUDIO_STATE\": {\n            return {\n                ...state,\n                audioIsPlaying: action.payload\n            }\n        }\n        case \"UPDATE_CURRENT_NOTE\": {\n            return {\n                ...state,\n                currentNote: action.payload\n            }\n        }\n        case \"RESET_NOTES\": {\n            return {\n                ...state,\n                notes: []\n            }\n        }\n        case \"UPDATE_NOTES\": {\n            return {\n                ...state,\n                notes: [...state.notes, action.payload]\n            }\n        }\n        case \"UPDATE_CAN_SET_CAMERA_POS\": {\n            return {\n                ...state,\n                canSetCameraPos: false\n            }\n        }\n        case \"UPDATE_CAMERA_ZPOS\": {\n            const note = action.payload,\n             { currentCue } = note;  \n            let zPos = state.cameraZPos;\n            if(currentCue > 14) {\n                if(currentCue % 14 === 1 && currentCue > 28 && currentCue < 84) {\n                    return {\n                        ...state,\n                        canSetCameraPos: true,\n                        cameraZPos: randomIntFromInterval(-325, -225)\n                    }\n                }\n                return { \n                    ...state,\n                    canSetCameraPos: false\n                }; \n            } \n            else if(currentCue) {\n                zPos = zPos + 60;\n            }\n            return {\n                ...state,\n                canSetCameraPos: true,\n                cameraZPos: zPos\n            }\n        }\n        case \"UPDATE_CAMERA_ROTATE_SPEED\": {\n            return {\n                ...state,\n                cameraRotateSpeed: state.cameraRotateSpeed * -1\n            }\n        }\n        default:\n            throw new Error('Action type does not exist!')\n    }\n}","import React, { createContext, useReducer } from 'react';\n\nimport Reducer from \"./Reducer\";\n\nconst initialState = {\n    coloursOptions: [\n        'maroon',\n        'red',\n        'purple',\n        'green',\n        'yellow',\n        'blue',\n        'pink',\n        'aqua',\n        'teal',\n        'lime'\n    ],\n    audioIsPlaying: false,\n    notes: [],  \n    currentNote: 0,\n    canSetCameraPos: true,\n    cameraZPos: -1050,\n    cameraRotateSpeed: -2\n}\n\nexport const Context = createContext(initialState);\n\nexport const GlobalContextProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(Reducer, initialState);\n\n    const updateIsAudioPlaying = (playing) => {\n        dispatch({ type: \"UPDATE_AUDIO_STATE\", payload: playing });\n    }\n\n    const updateNotes = (newNote) => {\n        dispatch({ type: \"UPDATE_NOTES\", payload: newNote });\n    }\n\n    const resetNotes = () => {\n        dispatch({ type: \"RESET_NOTES\" });\n    }\n\n    const updateCurrentNote = (newNote) => {\n        dispatch({ type: \"UPDATE_CURRENT_NOTE\", payload: newNote });\n    }\n\n    const updateCanSetCameraPos = () => {\n        dispatch({ type: \"UPDATE_CAN_SET_CAMERA_POS\" });\n    }\n\n    const updateCameraZPos = (newCue) => {\n        dispatch({ type: \"UPDATE_CAMERA_ZPOS\", payload: newCue  });\n    }\n\n    const updateCameraRotateSpeed = () => {\n        dispatch({ type: \"UPDATE_CAMERA_ROTATE_SPEED\"  });\n    }\n\n    return <Context.Provider\n        value={\n            {\n                coloursOptions: state.coloursOptions,\n                audioIsPlaying: state.audioIsPlaying,\n                updateIsAudioPlaying,\n                notes: state.notes,\n                updateNotes,\n                resetNotes,\n                currentNote: state.currentNote,\n                updateCurrentNote,\n                canSetCameraPos: state.canSetCameraPos,\n                updateCanSetCameraPos,\n                cameraZPos: state.cameraZPos,\n                updateCameraZPos,\n                cameraRotateSpeed: state.cameraRotateSpeed,\n                updateCameraRotateSpeed\n            }\n        }\n    >\n        {children}\n    </Context.Provider>\n};\n","import React, { useRef } from \"react\";\nimport { extend, useThree, useFrame  } from \"@react-three/fiber\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nexport default function CameraControls(props) {\n  const { canSetCameraPos, updateCanSetCameraPos, cameraZPos, cameraRotateSpeed } = props;\n\n  // Get a reference to the Three.js Camera, and the canvas html element.\n  // We need these to setup the OrbitControls class.\n  // https://threejs.org/docs/#examples/en/controls/OrbitControls\n  const {\n    camera,\n    gl: { domElement },\n  } = useThree();\n\n  // Ref to the controls, so that we can update them on every frame with useFrame\n  const controls = useRef();\n  useFrame(() => {\n    if(canSetCameraPos) {\n      camera.position.set( 0, 0, cameraZPos );\n      updateCanSetCameraPos();\n    }\n    controls.current.autoRotate = true;\n    controls.current.autoRotateSpeed = cameraRotateSpeed;\n    controls.current.update()\n  });\n  return (\n    <orbitControls\n      ref={controls}\n      args={[camera, domElement]}\n      enableZoom={true}\n    />\n  );\n};\n\n\nextend({ OrbitControls });","import React, { useEffect, useRef, useMemo } from \"react\";\nimport { Vector2 } from \"three\"\nimport { extend, useFrame, useThree } from \"@react-three/fiber\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\"\nimport { OutlinePass } from \"three/examples/jsm/postprocessing/OutlinePass\"\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\"\n\nextend({ EffectComposer, RenderPass, OutlinePass })\n\nexport default function Effects(props) {\n    const { outlines } = props,\n        { gl, scene, size, camera } = useThree(),\n        composer = useRef(),\n        aspect = useMemo(() => new Vector2(window.innerWidth, window.innerHeight), [size]);\n  \n    useEffect(() => {composer.current.setSize(window.innerWidth, window.innerHeight)}, [size]);\n\n    useFrame(() => {composer.current.render()}, 1);\n\n\n    return (\n        <>\n        <effectComposer ref={composer} args={[gl]}>\n           <renderPass attachArray=\"passes\" args={[scene, camera]} />\n           {\n                outlines.map((outline, index) => (\n                    <outlinePass\n                        key={index}\n                        attachArray=\"passes\"\n                        args={[aspect, scene, camera]}\n                        visibleEdgeColor={outline.glow}\n                        selectedObjects={[outline]}\n                        edgeStrength={2.5}\n                        edgeThickness={2.8}\n                        edgeGlow={2.7}\n                        hiddenEdgeColor={0}\n                    />\n                ))\n            }\n        </effectComposer> \n        </>\n    );\n};","import React, { useEffect, useRef, useContext } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { LightningStrike } from 'three/examples/jsm/geometries/LightningStrike.js';\nimport { Context } from \"../context/Context.js\";\n\n\nexport default function String(props) {\n    const { pos, colour, addToObjectsArray } = props,\n        { coloursOptions } = useContext(Context),\n        mesh = useRef(),\n        lightning = new LightningStrike();\n        \n  \n    useFrame((state) => {\n        const time = state.clock.getElapsedTime();\n        mesh.current.geometry.update(time);\n    });\n\n    useEffect(\n        () => {\n            mesh.current.glow = coloursOptions[Math.floor(Math.random() * coloursOptions.length)];\n            addToObjectsArray(mesh.current);\n        }, \n        [addToObjectsArray]\n    );\n\n    return (\n        <mesh ref={mesh} geometry={lightning} position={pos}>\n            <meshBasicMaterial\n                color={colour}\n                attach=\"material\"\n                transparent\n                roughness={0.1}\n                metalness={0.1}\n            />\n        </mesh>\n    );\n};","import React, { Suspense, useContext } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { Stars } from \"@react-three/drei\";\nimport { Context } from \"./context/Context\";\nimport CameraControls from './components/CameraControls'\nimport Effects from './components/Effects'\nimport String from './components/String'\n\nexport default function Scene() {\n    const { notes, currentNote, canSetCameraPos, updateCanSetCameraPos, cameraZPos, cameraRotateSpeed  } = useContext(Context),\n        { currentCue } = currentNote,\n        objectsArray = [],\n        addToObjectsArray = (string) => {\n          objectsArray.push(string);\n        };\n    return (\n        <Canvas>\n            <Suspense fallback='loading...'>\n                <ambientLight intensity={0.5} />\n                <spotLight position={[10, 10, 10]} angle={0.15} penumbra={1} />\n                <pointLight position={[-10, -10, -10]} />\n                <Stars radius={75} saturation={50} fade={true} />\n                <>\n                    {notes.map((note, index) => (\n                        <String key={index} pos={[note.xPos, note.yPos, note.zPos]} colour={note.colour} addToObjectsArray={addToObjectsArray} />\n                    ))}\n                </>\n                <Effects outlines={objectsArray} />\n                <CameraControls canSetCameraPos={canSetCameraPos} updateCanSetCameraPos={updateCanSetCameraPos} cameraZPos={cameraZPos} cameraRotateSpeed={cameraRotateSpeed} />\n            </Suspense>\n        </Canvas>\n    );\n}","// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='play-icon' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path className='play-icon__play' d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n            <path className='play-icon__pause' xmlns=\"http://www.w3.org/2000/svg\" d=\"M9 16h2V8H9Zm4 0h2V8h-2Zm-1 6q-2.075 0-3.9-.788-1.825-.787-3.175-2.137-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175 1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138 1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175-1.35 1.35-3.175 2.137Q14.075 22 12 22Zm0-2q3.35 0 5.675-2.325Q20 15.35 20 12q0-3.35-2.325-5.675Q15.35 4 12 4 8.65 4 6.325 6.325 4 8.65 4 12q0 3.35 2.325 5.675Q8.65 20 12 20Zm0-8Z\"/>\n        </svg>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/lightning-no-1.fb3e5d26.ogg\";","export default __webpack_public_path__ + \"static/media/lightning-no-1.1611ab50.mid\";","import React, { useRef, useEffect, useContext } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\n\nimport audio from \"../audio/lightning-no-1.ogg\";\nimport midi from \"../audio/lightning-no-1.mid\";\nimport { Context } from \"./context/Context.js\";\n\nconst Audio = () => {\n    const animation = useRef();\n    const sketchRef = useRef();\n    const { coloursOptions, updateNotes, resetNotes, updateCurrentNote, updateCameraZPos, updateCameraRotateSpeed } = useContext(Context);\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    const noteSet1 = result.tracks[8].notes; // Combinator 1 - Touch Orchestra\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        } \n\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.noLoop()\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n\n            }\n        }\n\n        p.gridVersion = 1;\n\n        p.executeCueSet1 = (note) => {\n            const { currentCue, ticks } = note;\n            const colours =coloursOptions,\n                colour  = colours[Math.floor(Math.random() * colours.length)],\n                dist = currentCue > 15 ? 150 : currentCue;\n            \n            updateCurrentNote(note);\n            updateCameraZPos(note);\n\n            if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && currentCue % 2 === 0 && currentCue < 84){\n                resetNotes();\n            }\n            else if (currentCue % 14 < 6 && currentCue < 84 && currentCue % 2 === 0){\n                resetNotes();\n            }\n            else if ([6, 10, 1].includes(currentCue % 14)){\n                resetNotes();\n            }\n\n            if((currentCue % 14 === 1 || ticks % 61440 === 0) && currentCue > 14) {\n                const root = document.documentElement,\n                    gridOptions = [1,2,3,4,5];\n                gridOptions.splice(p.gridVersion - 1, 1);\n                p.gridVersion = p.random(gridOptions);\n                root.style.setProperty(\"--canvas-bg\", \"var(--bg-gradient-\" + p.gridVersion + ')');\n            }\n\n            if(currentCue % 14 === 1 && currentCue > 15) {\n                updateCameraRotateSpeed();\n            }\n\n            updateNotes(\n                {\n                    colour: colour,\n                    xPos: p.random(-dist, dist),\n                    yPos: p.random(-dist/2 - 50, dist/2 - 50),\n                    zPos: p.random(-50, dist)\n                }\n            );\n        }\n\n        p.mousePressed = () => {\n            \n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    const playHandler = () => {\n        console.log(animation.current);\n        if(animation.current) {\n            \n            if(animation.current.audioLoaded){\n                if (animation.current.song.isPlaying()) {\n                    animation.current.song.pause();\n                    document.getElementById(\"play-icon\").classList.remove(\"play-icon--playing\");\n                } else {\n                    if (parseInt(animation.current.song.currentTime()) >= parseInt(animation.current.song.buffer.duration)) {\n                        animation.current.reset();\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"play-icon--playing\");\n                    animation.current.canvas.addClass(\"fade-in\");\n                    animation.current.song.play();\n                }\n            }\n        }\n    }\n\n    useEffect(() => {\n        animation.current = new p5(Sketch, sketchRef.current);\n    }, []);\n\n\n    return (\n        <div ref={sketchRef}>\n            <button onClick={playHandler} id=\"play-button\">\n                <PlayIcon  />\n            </button>\n        </div>\n    );\n};\n\nexport default Audio;\n","import Scene from './Scene.js'\nimport Audio from './Audio.js'\nimport { GlobalContextProvider } from './context/Context';\n\nexport default function App() {\n  return (\n    <GlobalContextProvider>\n      <Scene />\n      <Audio />\n    </GlobalContextProvider>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './js/App';\nimport './css/build.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}